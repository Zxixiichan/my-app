============================================================

接口地址网址：http://doc.xuexiluxian.cn/web/#/item/index

帐号：testapi
密码：123456

============================================================


一、什么是electron

	是一个开发桌面应用（电脑软件）的框架

二、桌面应用（软件） 和 网页程序有什么区别

	网页：bs软件
	客户端 ：cs软件

三、熟悉electron的开发模式

	主进程   ==> 后端的操作：比如node.js

	渲染进程 ==> 页面的东西

四、electron开发了哪些软件

	程序员最知道就是vscode

五、electron开发模式
	
	默认走传统方式：新建多个.html / index.css / index.js

	***目前为止，我们一般都会用 electron + vue的模式开发

六、electron + vite + vue3 
		
	网址：https://evite.netlify.app/

	安装步骤：
		npx degit alex8088/electron-vite-boilerplate electron-app
		cd electron-app
		npm install
		npm run dev

七、目录结构

	electron.vite.config.ts ==》 全局配置文件（类似于vue的vue.config.js）

	src
		main  		==》操作主进程
		renderer 	==》操作渲染进程

	***index.html的<meta>记得注掉***

八、安装路由

	8.1 安装：npm install vue-router -S
	8.2 新建：router/index.js
	8.3 router/index.js
		import { createRouter, createWebHashHistory } from "vue-router";
		import Home from '@views/Home.vue'
		export default createRouter({
		  history: createWebHashHistory(),//hash模式
		  routes:[{ path: "/", component: Home }]//路由配置规则数组
		})

	8.4 在main.ts里use一下: .use(router)

	8.5 APP.vue: <router-view />

	8.6 新建views/Home.vue
		
九、pinia

	官网：https://pinia.web3doc.top/

	9.1 下载：npm install pinia -S
	9.2 main.js引入

		import { createPinia } from 'pinia'
		app.use(createPinia())

	9.3 新建目录：store/index.js

		import { defineStore } from 'pinia'

		export const useStore = defineStore('storeId', {
		  state: () => {
		    return {
		      counter: 0,
		    }
		  },
		  getters:{},
		  actions:{}
		})


十、以上操作都完毕后，整个的技术栈为：

	electron + vue3 + vite[构建工具] + ts + pinia[状态管理] + vueRouter


十一、请求二次封装 ： 在简历中，千万不要写axios二次封装

	11.1 下载axios

		npm install axios -S

	11.2 新建 utils / request.js

	11.3 request.js写入内容
		import axios from 'axios';
		import config from '@config'

		const request = axios.create({
			baseURL: config.api
		});
		
		// 添加请求拦截器
		request.interceptors.request.use(function (config) {
			// 在发送请求之前做些什么
			return config;
		}, function (error) {
			// 对请求错误做些什么
			return Promise.reject(error);
		});
		
		// 添加响应拦截器
		request.interceptors.response.use(function (response) {
			// 2xx 范围内的状态码都会触发该函数。
			// 对响应数据做点什么
			return response;
		}, function (error) {
			// 超出 2xx 范围的状态码都会触发该函数。
			// 对响应错误做点什么
			return Promise.reject(error);
		});
		
		export default request;


十二、在electron配置代理来解决跨域问题
	
	12.1 api解耦

		单独弄多个js文件，来管理请求

	12.1 代理在生产阶段不生效怎么办？
		问题：http://uat.crm.xuexiluxian.cn/api/u/loginByJson ==> /api/u/loginByJson
		
		解决这个问题，需要配置【环境变量】，build新建文件:

		.env.development ==> 开发阶段
		.env.production  ==> 生产阶段

		***你配置过vite哪些东西呀？

	12.2 环境变量配置 ( 这是配置vite )

		***config配置

			const publicDir = resolve('resources')
			const envDir = resolve('build')

			publicDir,
		    envDir,
		    envPrefix: 'RENDERER_',

	12.3 在开发阶段和生产阶段打开的 loadUrl和 loadFile 注意事项

		loadUrl  ==》 主进程，在开发阶段生效

		loadFile ==》 主进程，在生产阶段生效
	
	
十三、路由的二次封装
	把导航守卫(guards.ts) 和 路由表(routes.ts) 单独抽离开

十四、安装element plus
	npm install element-plus --save
	npm install -D unplugin-vue-components unplugin-auto-import
	npm install @element-plus/icons-vue
	打开electron.vite.config.ts进行配置

十五、下载AES
	npm i crypto-js

	//aes.js
	const key = CryptoJS.enc.Utf8.parse( 'bGvnMc62sh5RV6zP' ) // 十六位十六进制数作为密钥
	const iv = CryptoJS.enc.Utf8.parse( '1eZ43DLcYtV2xb3Y' ) // 十六位十六进制数作为密钥偏移量


十六、国际化
	
	16.1 安装
		npm install vue-i18n
	16.2 配置
		16.2.1 新建locales目录
		16.2.2 新建lang目录 ==> 创建语言包文件

		16.2.3 在locales根目录的index中进行配置
		
		import { createI18n } from 'vue-i18n'
		import en from './lang/en'
		import zh from './lang/zh-cn'
		// element语言包
		import zhCn from 'element-plus/dist/locale/zh-cn.mjs'
		import English from 'element-plus/dist/locale/en.mjs'
		
		const messages = {
			'zh-cn':{el:zhCn,...zh},
			'en':{el:English,...en}
		}
		const i18n = createI18n({
		  locale: localStorage.getItem('lang') || 'zh-cn', // 初始化配置语言
		  messages
		})
		export default i18n

		16.2.4 在main.ts中注册
		
		import i18n from './locales'
		createApp(App).use(i18n)

		16.2.5 使用方法
		<h4>{{ $t('login.slogan') }}</h4>

十七、渲染进程通信主进程

	渲染进程

		electron.ipcRenderer.invoke('raaaa',{
			name: 'close-window',
		})

	主进程

		//一个窗口可能通信n次，那么没必要写n多个ipcMain.handle('xxx')，使用res.name区分即可
		
		import { ipcMain } from 'electron'

		ipcMain.handle('raaaa', (data,res) => {
			if(res.name == 'close-window'){
				mainWindow.close()
			}
		    console.log( '11111',data,res );
		})

十八、换肤
views/login/Login.vue	

十九、登录后操作
		1. 拿到token
		2. 获取个人信息 ==》传递token
		3. 获取路由 ==》传递[获取个人信息]的权限编码
		4.进入后台管理系统
			4.1 如果用户是最高权限("*:*:*")，直接通行
			4.2 如果不是最高权限，就要判断此用户如果没有某权限，无法进入当前路由
			4.3 如果一切ok，那么就动态加载路由


=========CRM测试帐号 =============

	用户名：admin
	密码： abc123456

=========CRM测试帐号 end =========

图片路径相关问题：
	url('images/auth_banner.jpg') 默认会从resources里面找 相当于vue项目中的public目录
	而 <img src="xxx"> 会从src/renderer/src/assets里面找







